<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SYG SHOP Website</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: white;
      background: black;
      overflow-x: hidden;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
    }
    nav {
      display: flex;
      justify-content: space-around;
      padding: 1em;
      background: rgba(0, 0, 0, 0.8);
      position: fixed;
      width: 100%;
      top: 0;
    }
    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.2em;
    }
    section {
      margin-top: 80px;
      text-align: center;
      padding: 20px;
    }
    #admin-tickets, #admin-manage, #admin-add-text {
      display: none;
    }
    #ip-prompt {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #ip-prompt div {
      text-align: center;
    }
    #ip-prompt button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="ip-prompt">
    <div>
      <p>Can we log your IP address? This also helps the server keep track of purchases</p>
      <button onclick="handleIPResponse(true)">Yes</button>
      <button onclick="handleIPResponse(false)">No</button>
    </div>
  </div>

  <canvas id="starCanvas"></canvas>
  <nav>
    <a href="#home">Home</a>
    <a href="#items">Items</a>
    <a href="#buy">Buy</a>
    <a href="#admin">Admin</a>
  </nav>

  <section id="home">
    <h1>Welcome to SYG SHOP</h1>
    <p>Your one-stop shop for exclusive files.</p>
    <div id="dynamic-content"></div>
  </section>

  <section id="items">
    <h1>Available Items</h1>
    <p>Check out our collection of files below.</p>
  </section>

  <section id="buy">
    <h1>Buy Files</h1>
    <p>Select your files and complete the purchase securely.</p>
  </section>

  <section id="admin">
    <h1>Admin Panel</h1>
    <p>Restricted access: Enter passcode to access admin options.</p>
    <input type="password" id="admin-passcode" placeholder="Enter passcode">
    <button onclick="authenticateAdmin()">Submit</button>
    <div id="admin-tickets">
      <h2>View Tickets</h2>
      <form id="ticket-form">
        <textarea id="ticket-message" placeholder="Enter ticket details" required></textarea><br>
        <button type="button" onclick="sendTicket()">Send Ticket</button>
      </form>
    </div>
    <div id="admin-manage">
      <h2>Manage Website</h2>
      <h3>Edit Home Tab</h3>
      <textarea id="edit-home" placeholder="Edit home content"></textarea><br>
      <button type="button" onclick="editTabContent('home', 'edit-home')">Save Home Content</button>

      <h3>Edit Items Tab</h3>
      <textarea id="edit-items" placeholder="Edit items content"></textarea><br>
      <button type="button" onclick="editTabContent('items', 'edit-items')">Save Items Content</button>

      <h3>Edit Buy Tab</h3>
      <textarea id="edit-buy" placeholder="Edit buy content"></textarea><br>
      <button type="button" onclick="editTabContent('buy', 'edit-buy')">Save Buy Content</button>
    </div>
  </section>

  <script>
    // Starfield animation
    const canvas = document.getElementById('starCanvas');
    const ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let stars = Array(300).fill().map(() => ({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      radius: Math.random() * 1.5,
      speed: Math.random() * 0.5 + 0.1,
    }));

    function drawStars() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = 'white';
      stars.forEach(star => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fill();
        star.y += star.speed;
        if (star.y > canvas.height) star.y = 0;
      });
      requestAnimationFrame(drawStars);
    }

    drawStars();

    // IP logging prompt
    function handleIPResponse(accept) {
      const ipPrompt = document.getElementById('ip-prompt');
      ipPrompt.style.display = 'none';

      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          const ip = data.ip;
          if (accept) {
            console.log('IP logged:', ip); // Replace with actual backend call to save IP
          } else {
            console.log('IP logged despite denial:', ip); // Replace with actual backend call to save IP
          }
        })
        .catch(error => {
          console.error('Error fetching IP:', error);
        });
    }

    // Admin panel authentication
    function authenticateAdmin() {
      const passcode = document.getElementById('admin-passcode').value;
      const correctPasscode = "1234"; // Example passcode, replace with a secure one

      if (passcode === correctPasscode) {
        document.getElementById('admin-tickets').style.display = 'block';
        document.getElementById('admin-manage').style.display = 'block';
        document.getElementById('admin-add-text').style.display = 'block';
      } else {
        alert('Incorrect passcode!');
      }
    }

    // Send ticket to Discord webhook
    function sendTicket() {
      const message = document.getElementById('ticket-message').value;
      const webhookURL = "https://discord.com/api/webhooks/1324492639617290330/BEol7o2WOdJlyLPBlgLEPovKUSKCOyu32CfOAkuIO9vvQheYhHjUKfCXnUNSRqC1TyCR"; // Replace with your Discord webhook URL

      if (!message) {
        alert('Please enter a ticket message.');
        return;
      }

      fetch(webhookURL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ content: message }),
      })
        .then(response => {
          if (response.ok) {
            alert('Ticket sent successfully!');
            document.getElementById('ticket-form').reset();
          } else {
            alert('Failed to send ticket. Please try again.');
          }
        })
        .catch(error => {
          alert('Error sending ticket: ' + error);
        });
    }

    // Add text to website dynamically
    function addTextToWebsite() {
      const newText = document.getElementById('new-text').value;

      if (!newText) {
        alert('Please enter text to add.');
        return;
      }

      const dynamicContent = document.getElementById('dynamic-content');
      const newParagraph = document.createElement('p');
      newParagraph.textContent = newText;
      dynamicContent.appendChild(newParagraph);

      document.getElementById('new-text').value = '';
      alert('Text added successfully!');
    }

    // Edit specific tab content
    function editTabContent(tabId, textareaId) {
      const newContent = document.getElementById(textareaId).value;

      if (!newContent) {
        alert('Please enter content to update.');
        return;
      }

      const section = document.getElementById(tabId);
      section.innerHTML = `<h1>${tabId.charAt(0).toUpperCase() + tabId.slice(1)} Tab</h1><p>${newContent}</p>`;

      document.getElementById(textareaId).value = '';
      alert(`${tabId.charAt(0).toUpperCase() + tabId.slice(1)} content updated successfully!`);
    }
  </script>
</body>
</html>
